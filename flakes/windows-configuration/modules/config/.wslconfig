[wsl2]
# Limits VM memory in WSL 2
memory=16GB

# Makes the WSL 2 VM use four virtual processors
processors=4

# Explicitly disable Virtio / 9P compatibility to prevent issues like
# https://github.com/microsoft/WSL/issues/9360
virtio9p=false

# Linux swap partition size. Should be 50% of memory size.
swap=8GB

# There is an issue with WSL 2 version 1.2.5 and up with systemd user services.
#
# See https://github.com/microsoft/WSL/issues/10050#issuecomment-1552415151
# for a description of this fix.
#
# See https://github.com/nix-community/NixOS-WSL/issues/527 for the nixos-wsl
# issue on this matter.
#
# The missing "systemd --user" issue is here:
# https://github.com/nix-community/NixOS-WSL/issues/375
kernelCommandLine = cgroup_no_v1=all
